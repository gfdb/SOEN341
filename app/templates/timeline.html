{% extends "layout.html" %}
{% block header %}{{ super () }}{% endblock %}
{% block content %}
{% for post in posts %}

<article class="media content-section">
  <div class="media-body">
    <div class="article-metadata">
      <h6 class="mr-2"><b>{{ post.author }}</b></h6>
    </div>
    <img src="static/images/{{ post.image }}" alt="image" width=100% height="400">
    <div class="article-metadata">
      <div class="d-flex flex-row fs-12 comment">
        <div class="like p-2 cursor"><i class="fa fa-thumbs-o-up"></i><span class="ml-1">Like</span></div>
        <div class="like p-2 cursor"><i class="fa fa-commenting-o"></i><span class="ml-1">Comment</span></div>
        <div class="like p-2 cursor"><i class="fa fa-share"></i><span class="ml-1">Share</span></div>
      </div>

      <h6 class="mr-2"><b>{{ post.author }}</b> {{post.description}}</h6><p></p>
      {% for comment in post.comments %}
        <p class="comment-styling"><b>{{ comment['author'] }}</b>&nbsp;&nbsp;{{ comment['comment'] }}</p>
      {% endfor %}
      <form action="" method="post">
        <div class="comment">
          {% if username %}
              <div class="d-flex flex-row align-items-start">
                {{form.comment(class_ = "form-control ml-1 shadow-none textarea")}}
                {{form.parentID(value = post.uuid)}}
                {{form.author(value = username)}} <!-- When users are added, this should be the current_user instead of post.author -->
                {{ form.hidden_tag() }}
              </div>
              <div class="mt-2 text-right">
                <input type="submit" class="btn btn-primary btn-sm shadow-none comment" value="Post comment">
                <input class="btn btn-outline-primary btn-sm ml-1 shadow-none comment" onClick="eraseText();" type="button"
                  value="Cancel">
              </div>
          {% else %}
              <div class="mt-2 text-center">
                  <a href="/login"><input class="btn btn-outline-primary btn-sm ml-1 shadow-none" type="button"
                value="Login to leave a comment"></a>
             </div>
          {% endif %}
            <small class="mr-2">{{ post.date_posted }}</small>
        </div>
      </form>
    </div>
  </div>
</article>
{% endfor %}
{% endblock content %}